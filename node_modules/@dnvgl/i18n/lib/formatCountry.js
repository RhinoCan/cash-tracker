import { findIso3166Country } from "./findIso3166Country";
import { isCharAtoZUppercase } from "./internal/isCharAtoZUppercase";
var intlDisplayNamesCache = null, cachedLocale = undefined;
export function formatCountry(country, locale) {
    var _a, _b, _c;
    var countryAlpha2Code = (typeof country === "string" && country.length === 2)
        ? (isCharAtoZUppercase(country.charCodeAt(0)) && isCharAtoZUppercase(country.charCodeAt(1)))
            ? country
            : undefined
        : (_a = findIso3166Country(country)) === null || _a === void 0 ? void 0 : _a.alpha2Code;
    if (countryAlpha2Code === undefined) {
        return returnUnsupportedCountry(country);
    }
    if (intlDisplayNamesCache === null || locale !== cachedLocale) {
        if (typeof Intl.DisplayNames === "undefined") {
            return (_c = (_b = findIso3166Country(country)) === null || _b === void 0 ? void 0 : _b.countryName) !== null && _c !== void 0 ? _c : returnUnsupportedCountry(country);
        }
        intlDisplayNamesCache = new Intl.DisplayNames(locale, { type: "region" });
        cachedLocale = locale;
    }
    return intlDisplayNamesCache.of(countryAlpha2Code);
}
function returnUnsupportedCountry(country) {
    return typeof country === "string" ? country : "";
}
