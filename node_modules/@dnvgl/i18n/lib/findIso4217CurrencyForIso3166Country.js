import { convertToDate } from "./internal/convertToDate";
import { iso3166Countries } from "./internal/iso3166Countries";
import { iso3166CountryToIso4217Currency } from "./internal/iso3166CountryToIso4217Currency";
import { iso4217Currencies } from "./internal/iso4217Currencies";
export function findIso4217CurrencyForIso3166Country(code, statusForTheDay) {
    var _a, _b;
    var countryAlpha3Code = typeof code === "string"
        ? code.length === 3
            ? code
            : (_a = iso3166Countries.find(function (x) { return x.alpha2Code === code; })) === null || _a === void 0 ? void 0 : _a.alpha3Code
        : (_b = iso3166Countries.find(function (x) { return x.numericCode === code; })) === null || _b === void 0 ? void 0 : _b.alpha3Code;
    if (!countryAlpha3Code) {
        return undefined;
    }
    var resolver = iso3166CountryToIso4217Currency.get(countryAlpha3Code);
    if (!resolver) {
        return undefined;
    }
    if (typeof resolver === "string") {
        return iso4217Currencies.find(function (x) { return x.alpha3Code === resolver; });
    }
    var pointInTime = statusForTheDay ? convertToDate(statusForTheDay) : new Date();
    var resolvedCurrencyAlpha3CodeByDate = resolver(pointInTime);
    return iso4217Currencies.find(function (x) { return x.alpha3Code === resolvedCurrencyAlpha3CodeByDate; });
}
